{"version":3,"sources":["null","ng://@ngx-share/core/lib/share.tokens.ts","ng://@ngx-share/core/lib/utils.ts","ng://@ngx-share/core/lib/share.operators.ts","ng://@ngx-share/core/lib/share.prop.ts","ng://@ngx-share/core/lib/share.service.ts","ng://@ngx-share/core/lib/share-button.directive.ts","ng://@ngx-share/core/lib/share-count.pipe.ts","ng://@ngx-share/core/lib/share.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","__spread","concat","CONFIG","InjectionToken","isObject","item","Array","isArray","mergeDeep","target","sources","_i","source","shift","key","_a","_b","apply","getMetaContent","metaTag","document","querySelector","getAttribute","undefined","metaTagsOperators","map","ref","SharerURL","prop","share","os","metaTags","metaTagsValues_1","link","entries","encodeURIComponent","join","printOperators","window","print","copyOperators","renderer","setStyle","el","temp","text","icon","url","decodeURIComponent","switchMap","browser","of","pipe","tap","textArea","createElement","body","appendChild","range","createRange","selectNodeContents","selection","getSelection","removeAllRanges","addRange","readOnly","setSelectionRange","select","execCommand","removeChild","successText","successIcon","catchError","failText","failIcon","cd","markForCheck","delay","urlInMessageOperators","description","FacebookCountOperators","res","share_count","PinterestCountOperators","JSON","parse","replace","count","TumblrCountOperators","response","note_count","RedditCountOperators","data","children","score","shareButtonsProp","facebook","type","color","desktop","android","ios","operators","request","twitter","tags","via","google","linkedin","title","pinterest","image","args","responseType","reddit","tumblr","whatsapp","messenger","telegram","vk","stumble","xing","sms","email","copy","ShareButtons","config","options","theme","include","exclude","size","twitterAccount","autoSetMeta","gaTracking","windowWidth","windowHeight","moreButtonIcon","lessButtonIcon","BehaviorSubject","this","setConfig","defineProperty","config$","addButton","name","Injectable","Inject","ShareButtonDirective","shareService","http","platform","EventEmitter","onClick","userAgent","_this","isPlatformBrowser","nativeElement","navigator","vendor","opera","test","MSStream","sharerURL","take","subscribe","ngOnChanges","changes","firstChange","previousValue","shareButton","createShareButton","fallbackUrl","console","warn","getValidUrl","location","href","filter","getCount","shareCount","emit","ga","opened","popUp_1","open","windowSize","pollTimer_1","setInterval","closed","clearInterval","jsonp","EMPTY","get","buttonsName","button","Error","removeClass","_buttonClass","addClass","style","setProperty","setAttribute","ariaLabel","Directive","selector","HttpClient","Renderer2","ChangeDetectorRef","ElementRef","decorators","PLATFORM_ID","Input","Output","HostListener","ShareCountPipe","transform","num","digits","si","symbol","rx","toFixed","shareCountFormatter","Pipe","ShareButtonsFactory","ShareModule","forRoot","ngModule","providers","provide","useValue","useFactory","deps","NgModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { ShareButtonsConfig } from './share.models';\r\n\r\nexport const CONFIG = new InjectionToken<ShareButtonsConfig>('CONFIG');\r\n","import { Observable, of } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\n/** Simple object check.*/\r\nfunction isObject(item): boolean {\r\n  return (item && typeof item === 'object' && !Array.isArray(item));\r\n}\r\n\r\n/** Deep merge two objects.*/\r\nexport function mergeDeep(target, ...sources) {\r\n  if (!sources.length) {\r\n    return target;\r\n  }\r\n  const source = sources.shift();\r\n\r\n  if (isObject(target) && isObject(source)) {\r\n    for (const key in source) {\r\n      if (isObject(source[key])) {\r\n        if (!target[key]) {\r\n          Object.assign(target, {[key]: {}});\r\n        }\r\n        mergeDeep(target[key], source[key]);\r\n      } else {\r\n        Object.assign(target, {[key]: source[key]});\r\n      }\r\n    }\r\n  }\r\n\r\n  return mergeDeep(target, ...sources);\r\n}\r\n\r\n/** Returns a readable number from share count */\r\nexport function shareCountFormatter(num: number, digits: number): string {\r\n\r\n  const si = [\r\n    {value: 1E9, symbol: 'B'},\r\n    {value: 1E6, symbol: 'M'},\r\n    {value: 1E3, symbol: 'K'}\r\n  ], rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\r\n\r\n  for (let i = 0; i < si.length; i++) {\r\n    if (num >= si[i].value) {\r\n      return (num / si[i].value).toFixed(digits).replace(rx, '$1') + si[i].symbol;\r\n    }\r\n  }\r\n  return num.toFixed(digits).replace(rx, '$1');\r\n}\r\n\r\n/** Copy text to clipboard */\r\nexport function copyToClipboard(url: string, browser: string): Observable<any> {\r\n  return of(url).pipe(\r\n    tap((text: string) => {\r\n\r\n      // Create a hidden textarea element\r\n      const textArea = document.createElement('textarea');\r\n      textArea.value = text;\r\n      document.body.appendChild(textArea);\r\n\r\n      // highlight textarea to copy the text\r\n      if (browser === 'ios') {\r\n        const range = document.createRange();\r\n        range.selectNodeContents(textArea);\r\n        const selection = window.getSelection();\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n        textArea.readOnly = true;\r\n        textArea.setSelectionRange(0, 999999);\r\n      } else {\r\n        textArea.select();\r\n      }\r\n      document.execCommand('copy');\r\n      document.body.removeChild(textArea);\r\n    })\r\n  );\r\n}\r\n\r\n/** Get meta tag content */\r\nexport function getMetaContent(key: string): string {\r\n  const metaTag: Element = document.querySelector(`meta[property=\"${key}\"]`);\r\n  return metaTag ? metaTag.getAttribute('content') : undefined;\r\n}\r\n\r\n/** Detect operating system 'ios', 'android', or 'desktop' */\r\nexport function getOS(): string {\r\n  const userAgent = navigator.userAgent || navigator.vendor || (<any>window).opera;\r\n\r\n  if (/android/i.test(userAgent)) {\r\n    return 'android';\r\n  }\r\n\r\n  if (/iPad|iPhone|iPod/.test(userAgent) && !(<any>window).MSStream) {\r\n    return 'ios';\r\n  }\r\n  return 'desktop';\r\n}\r\n\r\n\r\n/** Returns a valid URL or falls back to current URL */\r\nexport function getValidUrl(url: string, fallbackUrl: string): string {\r\n\r\n  if (url) {\r\n    const r = /(http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n    if (r.test(url)) {\r\n      return url;\r\n    }\r\n    console.warn(`[ShareButtons]: Sharing link '${url}' is invalid!`);\r\n  }\r\n  return fallbackUrl;\r\n}\r\n","import { of, OperatorFunction } from 'rxjs';\r\nimport { map, delay, switchMap, catchError } from 'rxjs/operators';\r\nimport { ShareButtonRef } from './share.models';\r\nimport { copyToClipboard, mergeDeep } from './utils';\r\n\r\n/**\r\n * Meta tags operator - Serialize meta tags into the sharer URL\r\n */\r\nexport const metaTagsOperators: OperatorFunction<any, any>[] = [\r\n  map((ref: ShareButtonRef) => {\r\n\r\n    // Social network sharer URL */\r\n    const SharerURL = ref.prop.share[ref.os];\r\n    if (SharerURL) {\r\n\r\n      // object contains supported meta tags\r\n      const metaTags = ref.prop.share.metaTags;\r\n\r\n      // object contains meta tags values */\r\n      const metaTagsValues = ref.metaTags;\r\n\r\n      let link = '';\r\n      // Set each meta tag with user value\r\n      if (metaTags) {\r\n        link = Object.entries(metaTags).map(([key, metaTag]) =>\r\n          metaTagsValues[key] ? `${metaTag}=${encodeURIComponent(metaTagsValues[key])}` : ''\r\n        ).join('&');\r\n      }\r\n      return SharerURL + link;\r\n    }\r\n    return;\r\n  })\r\n];\r\n\r\n/**\r\n * Print button operator\r\n */\r\nexport const printOperators: OperatorFunction<any, any>[] = [\r\n  map(() => window.print())\r\n];\r\n\r\n/**\r\n * Copy link to clipboard, used for copy button\r\n */\r\nexport const copyOperators: OperatorFunction<any, any>[] = [\r\n  map((ref: ShareButtonRef) => {\r\n\r\n    // Disable the button\r\n    ref.renderer.setStyle(ref.el, 'pointer-events', 'none');\r\n\r\n    ref.temp = {text: ref.prop.text, icon: ref.prop.icon};\r\n    ref.metaTags.url = decodeURIComponent(ref.metaTags.url);\r\n    return ref;\r\n  }),\r\n  switchMap((ref: ShareButtonRef) => copyToClipboard(ref.metaTags.url, ref.os).pipe(\r\n    map(() => {\r\n      ref.prop.text = ref.prop.successText;\r\n      ref.prop.icon = ref.prop.successIcon;\r\n      return ref;\r\n    }),\r\n    catchError(() => {\r\n      ref.prop.text = ref.prop.failText;\r\n      ref.prop.icon = ref.prop.failIcon;\r\n      return of(ref);\r\n    })\r\n  )),\r\n  map((ref: ShareButtonRef) => {\r\n    ref.cd.markForCheck();\r\n    return ref;\r\n  }),\r\n  delay(2000),\r\n  map((ref: ShareButtonRef) => {\r\n\r\n    // Enable the button\r\n    ref.renderer.setStyle(ref.el, 'pointer-events', 'auto');\r\n\r\n    // Reset copy button text and icon */\r\n    ref.prop.text = ref.temp.text;\r\n    ref.prop.icon = ref.temp.icon;\r\n    ref.cd.markForCheck();\r\n  })\r\n];\r\n\r\n/**\r\n * Add the share URL to message body, used for WhatsApp and Email buttons\r\n */\r\nexport const urlInMessageOperators: OperatorFunction<any, any>[] = [\r\n  map((ref: ShareButtonRef) => {\r\n    const description = ref.metaTags.description;\r\n    const url = ref.metaTags.url;\r\n    const newRef: ShareButtonRef = {\r\n      metaTags: {\r\n        description: description ? `${description}\\r\\n${url}` : url\r\n      }\r\n    };\r\n    return mergeDeep(ref, newRef);\r\n  })\r\n];\r\n\r\nexport const FacebookCountOperators: OperatorFunction<any, any>[] = [\r\n  map((res: any) => +res.share.share_count)\r\n];\r\n\r\nexport const PinterestCountOperators: OperatorFunction<any, any>[] = [\r\n  map((text: string) => JSON.parse(text.replace(/^receiveCount\\((.*)\\)/, '$1'))),\r\n  map((res: any) => +res.count)\r\n];\r\n\r\nexport const TumblrCountOperators: OperatorFunction<any, any>[] = [\r\n  map((res: any) => +res.response.note_count)\r\n];\r\n\r\nexport const RedditCountOperators: OperatorFunction<any, any>[] = [\r\n  map((res: any) => +res.data.children[0].data.score)\r\n];\r\n","import {\r\n  metaTagsOperators,\r\n  printOperators,\r\n  copyOperators,\r\n  urlInMessageOperators,\r\n  FacebookCountOperators,\r\n  PinterestCountOperators,\r\n  TumblrCountOperators,\r\n  RedditCountOperators\r\n} from './share.operators';\r\nimport { IShareButtons } from './share.models';\r\n\r\nexport const shareButtonsProp: IShareButtons = {\r\n  facebook: {\r\n    type: 'facebook',\r\n    text: 'Facebook',\r\n    icon: ['fab', 'facebook-f'],\r\n    color: '#4267B2',\r\n    share: {\r\n      desktop: 'https://www.facebook.com/sharer/sharer.php?',\r\n      android: 'https://www.facebook.com/sharer/sharer.php?',\r\n      ios: 'https://www.facebook.com/sharer/sharer.php?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'u'\r\n      }\r\n    },\r\n    count: {\r\n      request: 'http',\r\n      url: 'https://graph.facebook.com?id=',\r\n      operators: FacebookCountOperators\r\n    }\r\n  },\r\n  twitter: {\r\n    type: 'twitter',\r\n    text: 'Twitter',\r\n    icon: ['fab', 'twitter'],\r\n    color: '#00acee',\r\n    share: {\r\n      desktop: 'https://twitter.com/intent/tweet?',\r\n      android: 'https://twitter.com/intent/tweet?',\r\n      ios: 'https://twitter.com/intent/tweet?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url',\r\n        description: 'text',\r\n        tags: 'hashtags',\r\n        via: 'via'\r\n      }\r\n    }\r\n  },\r\n  google: {\r\n    type: 'google',\r\n    text: 'Google+',\r\n    icon: ['fab', 'google-plus-g'],\r\n    color: '#DB4437',\r\n    share: {\r\n      desktop: 'https://plus.google.com/share?',\r\n      android: 'https://plus.google.com/share?',\r\n      ios: 'https://plus.google.com/share?',\r\n      metaTags: {\r\n        url: 'url',\r\n      },\r\n      operators: metaTagsOperators\r\n    }\r\n  },\r\n  linkedin: {\r\n    type: 'linkedin',\r\n    text: 'LinkedIn',\r\n    icon: ['fab', 'linkedin-in'],\r\n    color: '#006fa6',\r\n    share: {\r\n      desktop: 'http://www.linkedin.com/shareArticle?',\r\n      android: 'http://www.linkedin.com/shareArticle?',\r\n      ios: 'http://www.linkedin.com/shareArticle?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url',\r\n        title: 'title',\r\n        description: 'summary'\r\n      },\r\n    }\r\n  },\r\n  pinterest: {\r\n    type: 'pinterest',\r\n    text: 'Pinterest',\r\n    icon: ['fab', 'pinterest-p'],\r\n    color: '#BD091D',\r\n    share: {\r\n      desktop: 'https://in.pinterest.com/pin/create/button/?',\r\n      android: 'https://in.pinterest.com/pin/create/button/?',\r\n      ios: 'https://in.pinterest.com/pin/create/button/?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url',\r\n        description: 'description',\r\n        image: 'media'\r\n      }\r\n    },\r\n    count: {\r\n      request: 'http',\r\n      url: 'https://api.pinterest.com/v1/urls/count.json?url=',\r\n      args: {responseType: 'text'},\r\n      operators: PinterestCountOperators\r\n    }\r\n  },\r\n  reddit: {\r\n    type: 'reddit',\r\n    text: 'Reddit',\r\n    icon: ['fab', 'reddit-alien'],\r\n    color: '#FF4006',\r\n    share: {\r\n      desktop: 'http://www.reddit.com/submit?',\r\n      android: 'http://www.reddit.com/submit?',\r\n      ios: 'http://www.reddit.com/submit?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url',\r\n        title: 'title'\r\n      },\r\n    },\r\n    count: {\r\n      request: 'http',\r\n      url: 'https://buttons.reddit.com/button_info.json?url=',\r\n      operators: RedditCountOperators\r\n    },\r\n  },\r\n  tumblr: {\r\n    type: 'tumblr',\r\n    text: 'Tumblr',\r\n    icon: ['fab', 'tumblr'],\r\n    color: '#36465D',\r\n    share: {\r\n      desktop: 'http://tumblr.com/widgets/share/tool?',\r\n      android: 'http://tumblr.com/widgets/share/tool?',\r\n      ios: 'http://tumblr.com/widgets/share/tool?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'canonicalUrl',\r\n        description: 'caption',\r\n        tags: 'tags'\r\n      }\r\n    },\r\n    count: {\r\n      request: 'jsonp',\r\n      url: 'https://api.tumblr.com/v2/share/stats?url=',\r\n      operators: TumblrCountOperators\r\n    }\r\n  },\r\n  whatsapp: {\r\n    type: 'whatsapp',\r\n    text: 'WhatsApp',\r\n    icon: ['fab', 'whatsapp'],\r\n    color: '#25D366',\r\n    share: {\r\n      desktop: 'https://web.whatsapp.com/send?',\r\n      android: 'whatsapp://send?',\r\n      ios: 'whatsapp://send?',\r\n      operators: [\r\n        ...urlInMessageOperators,\r\n        ...metaTagsOperators\r\n      ],\r\n      metaTags: {\r\n        description: 'text'\r\n      }\r\n    }\r\n  },\r\n  messenger: {\r\n    type: 'messenger',\r\n    text: 'Messenger',\r\n    icon: ['fab', 'facebook-messenger'],\r\n    color: '#0080FF',\r\n    share: {\r\n      android: 'fb-messenger://share/?',\r\n      ios: 'fb-messenger://share/?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'link'\r\n      }\r\n    }\r\n  },\r\n  telegram: {\r\n    type: 'telegram',\r\n    text: 'Telegram',\r\n    icon: ['fab', 'telegram-plane'],\r\n    color: '#0088cc',\r\n    share: {\r\n      desktop: 'https://t.me/share/url?',\r\n      android: 'https://t.me/share/url?',\r\n      ios: 'https://t.me/share/url?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url',\r\n        description: 'text'\r\n      }\r\n    }\r\n  },\r\n  vk: {\r\n    type: 'vk',\r\n    text: 'VKontakte',\r\n    icon: ['fab', 'vk'],\r\n    color: '#4C75A3',\r\n    share: {\r\n      desktop: 'http://vk.com/share.php?',\r\n      android: 'http://vk.com/share.php?',\r\n      ios: 'http://vk.com/share.php?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url'\r\n      }\r\n    }\r\n  },\r\n  stumble: {\r\n    type: 'stumble',\r\n    text: 'Stumble',\r\n    icon: ['fab', 'stumbleupon'],\r\n    color: '#eb4924',\r\n    share: {\r\n      desktop: 'http://www.stumbleupon.com/submit?',\r\n      android: 'http://www.stumbleupon.com/submit?',\r\n      ios: 'http://www.stumbleupon.com/submit?',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url'\r\n      }\r\n    }\r\n  },\r\n  xing: {\r\n    type: 'xing',\r\n    text: 'Xing',\r\n    icon: ['fab', 'xing'],\r\n    color: '#006567',\r\n    share: {\r\n      desktop: 'https://www.xing.com/app/user?op=share&',\r\n      android: 'https://www.xing.com/app/user?op=share&',\r\n      ios: 'https://www.xing.com/app/user?op=share&',\r\n      operators: metaTagsOperators,\r\n      metaTags: {\r\n        url: 'url'\r\n      }\r\n    }\r\n  },\r\n  sms: {\r\n    type: 'sms',\r\n    text: 'SMS',\r\n    icon: 'comment-alt',\r\n    color: '#20c16c',\r\n    share: {\r\n      desktop: 'sms:?',\r\n      android: 'sms:?',\r\n      ios: 'sms:?',\r\n      metaTags: {\r\n        description: 'body'\r\n      },\r\n      operators: [\r\n        ...urlInMessageOperators,\r\n        ...metaTagsOperators\r\n      ]\r\n    }\r\n  },\r\n  email: {\r\n    type: 'email',\r\n    text: 'Email',\r\n    icon:  'envelope',\r\n    color: '#FF961C',\r\n    share: {\r\n      desktop: 'mailto:?',\r\n      android: 'mailto:?',\r\n      ios: 'mailto:?',\r\n      operators: [\r\n        ...urlInMessageOperators,\r\n        ...metaTagsOperators\r\n      ],\r\n      metaTags: {\r\n        title: 'subject',\r\n        description: 'body'\r\n      }\r\n    }\r\n  },\r\n  copy: {\r\n    type: 'copy',\r\n    text: 'Copy link',\r\n    successText: 'Copied',\r\n    successIcon: 'check',\r\n    failText: 'Error',\r\n    failIcon: 'exclamation',\r\n    icon: 'link',\r\n    color: '#607D8B',\r\n    share: {\r\n      operators: copyOperators\r\n    }\r\n  },\r\n  print: {\r\n    type: 'print',\r\n    text: 'Print',\r\n    icon: 'print',\r\n    color: '#765AA2',\r\n    share: {\r\n      operators: printOperators\r\n    }\r\n  }\r\n};\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { IShareButton, ShareButtonsConfig } from './share.models';\r\nimport { CONFIG } from './share.tokens';\r\nimport { shareButtonsProp } from './share.prop';\r\nimport { mergeDeep } from './utils';\r\n\r\n@Injectable()\r\nexport class ShareButtons {\r\n\r\n  config: ShareButtonsConfig = {\r\n    prop: shareButtonsProp,\r\n    options: {\r\n      theme: 'default',\r\n      include: [],\r\n      exclude: [],\r\n      size: 0,\r\n      url: undefined,\r\n      title: undefined,\r\n      description: undefined,\r\n      image: undefined,\r\n      tags: undefined,\r\n      twitterAccount: undefined,\r\n      autoSetMeta: true,\r\n      gaTracking: false,\r\n      windowWidth: 800,\r\n      windowHeight: 500,\r\n      moreButtonIcon: 'ellipsis-h',\r\n      lessButtonIcon: 'minus'\r\n    }\r\n  };\r\n  config$ = new BehaviorSubject(this.config);\r\n\r\n  constructor(@Inject(CONFIG) config: ShareButtonsConfig) {\r\n    if (config) {\r\n      this.setConfig(config);\r\n    }\r\n  }\r\n\r\n  get prop() {\r\n    return this.config.prop;\r\n  }\r\n\r\n  get twitterAccount() {\r\n    return this.config.options.twitterAccount;\r\n  }\r\n\r\n  get theme() {\r\n    return this.config.options.theme;\r\n  }\r\n\r\n  get windowSize() {\r\n    return `width=${this.config.options.windowWidth}, height=${this.config.options.windowHeight}`;\r\n  }\r\n\r\n  get url() {\r\n    return this.config.options.url;\r\n  }\r\n\r\n  get title() {\r\n    return this.config.options.title;\r\n  }\r\n\r\n  get description() {\r\n    return this.config.options.description;\r\n  }\r\n\r\n  get image() {\r\n    return this.config.options.image;\r\n  }\r\n\r\n  get tags() {\r\n    return this.config.options.tags;\r\n  }\r\n\r\n  get autoSetMeta() {\r\n    return this.config.options.autoSetMeta;\r\n  }\r\n\r\n  get gaTracking() {\r\n    return this.config.options.gaTracking;\r\n  }\r\n\r\n  get size() {\r\n    return this.config.options.size;\r\n  }\r\n\r\n  setConfig(config: ShareButtonsConfig) {\r\n    this.config = mergeDeep(this.config, config);\r\n    this.config$.next(this.config);\r\n  }\r\n\r\n  addButton(name: string, data: IShareButton) {\r\n    const config = {\r\n      prop: {...shareButtonsProp, ...{[name]: data}}\r\n    };\r\n    this.setConfig(config);\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  Input,\r\n  Output,\r\n  HostListener,\r\n  Inject,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  EventEmitter,\r\n  ElementRef,\r\n  Renderer2,\r\n  ChangeDetectorRef,\r\n  PLATFORM_ID\r\n} from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { Observable, of, EMPTY } from 'rxjs';\r\nimport { tap, filter, switchMap, map, take, catchError } from 'rxjs/operators';\r\n\r\nimport { ShareButtons } from './share.service';\r\nimport { IShareButton, ShareButtonRef } from './share.models';\r\nimport { getMetaContent, getOS, getValidUrl } from './utils';\r\n\r\n/** Google analytics ref */\r\ndeclare const ga: Function;\r\n\r\n@Directive({\r\n  selector: '[shareButton]'\r\n})\r\nexport class ShareButtonDirective implements OnChanges {\r\n\r\n  /** A ref to button class - used to remove previous class when the button type is changed */\r\n  private _buttonClass: string;\r\n\r\n  /** Button properties */\r\n  prop: IShareButton;\r\n\r\n  /** Share button type */\r\n  @Input() shareButton: string;\r\n\r\n  /** Get share count */\r\n  @Input() getCount = false;\r\n\r\n  /** Set meta tags from document head, useful when SEO is supported */\r\n  @Input() autoSetMeta: boolean = this.shareService.autoSetMeta;\r\n\r\n  /** Meta tags inputs - initialized from the global options */\r\n  @Input() url: string = this.shareService.url;\r\n  @Input() title: string = this.shareService.title;\r\n  @Input() description: string = this.shareService.description;\r\n  @Input() image: string = this.shareService.image;\r\n  @Input() tags: string = this.shareService.tags;\r\n\r\n  /** Stream that emits when share count is fetched */\r\n  @Output() count = new EventEmitter<number>();\r\n\r\n  /** Stream that emits when share dialog is opened */\r\n  @Output() opened = new EventEmitter<string>();\r\n\r\n  /** Stream that emits when share dialog is closed */\r\n  @Output() closed = new EventEmitter<string>();\r\n\r\n  constructor(private shareService: ShareButtons,\r\n              private http: HttpClient,\r\n              public renderer: Renderer2,\r\n              public cd: ChangeDetectorRef,\r\n              private el: ElementRef,\r\n              @Inject(PLATFORM_ID) private platform: Object) {\r\n  }\r\n\r\n  /** Share link on element click */\r\n  @HostListener('click')\r\n  onClick() {\r\n    if (isPlatformBrowser(this.platform)) {\r\n      const metaTags = this.autoSetMeta ? {\r\n        url: this.url,\r\n        title: this.title || getMetaContent('og:title'),\r\n        description: this.description || getMetaContent('og:description'),\r\n        image: this.image || getMetaContent('og:image'),\r\n        via: this.shareService.twitterAccount || getMetaContent('twitter:site'),\r\n        tags: this.tags,\r\n      } : {\r\n        url: this.url,\r\n        title: this.title,\r\n        description: this.description,\r\n        image: this.image,\r\n        tags: this.tags,\r\n        via: this.shareService.twitterAccount,\r\n      };\r\n\r\n      const ref: ShareButtonRef = {\r\n        cd: this.cd,\r\n        renderer: this.renderer,\r\n        prop: this.prop,\r\n        el: this.el.nativeElement,\r\n        os: getOS(),\r\n        metaTags\r\n      };\r\n\r\n      // Share the link\r\n      of(ref).pipe(\r\n        ...this.prop.share.operators,\r\n        tap((sharerURL: any) => this.share(sharerURL)),\r\n        take(1)\r\n      ).subscribe();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (isPlatformBrowser(this.platform)) {\r\n\r\n      if (changes['shareButton'] && (changes['shareButton'].firstChange || changes['shareButton'].previousValue !== this.shareButton)) {\r\n        this.createShareButton(this.shareButton);\r\n      }\r\n\r\n      if (!this.url || (changes['url'] && changes['url'].previousValue !== this.url)) {\r\n        of(null).pipe(\r\n          map(() => {\r\n            this.url = getValidUrl(this.autoSetMeta ? this.url || getMetaContent('og:url') : this.url, window.location.href);\r\n            return this.url;\r\n          }),\r\n          filter(() => this.prop.count && this.getCount),\r\n          switchMap((url: string) => this.shareCount(url)),\r\n          tap((shareCount: number) => this.count.emit(shareCount)),\r\n          take(1)\r\n        ).subscribe();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open sharing dialog\r\n   * @param url - Share URL\r\n   */\r\n  share(url: string) {\r\n    if (url) {\r\n\r\n      // GA Tracking\r\n      if (this.shareService.gaTracking && typeof ga !== 'undefined') {\r\n        ga('send', 'social', this.prop.type, 'click', this.url);\r\n      }\r\n\r\n      // Emit when share dialog is opened\r\n      this.opened.emit(this.prop.type);\r\n\r\n      const popUp = window.open(url, 'newwindow', this.shareService.windowSize);\r\n\r\n      // Emit when share dialog is closed\r\n      if (popUp) {\r\n        const pollTimer = window.setInterval(() => {\r\n          if (popUp.closed) {\r\n            window.clearInterval(pollTimer);\r\n            this.closed.emit(this.prop.type);\r\n          }\r\n        }, 200);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get link share count\r\n   * @param url - Share URL\r\n   * @returns Share count\r\n   */\r\n  shareCount(url: string): Observable<any> {\r\n\r\n    if (this.prop.count.request === 'jsonp') {\r\n\r\n      return this.http.jsonp<any>(this.prop.count.url + url, 'callback').pipe(\r\n        ...this.prop.count.operators,\r\n        catchError(() => EMPTY),\r\n      );\r\n    } else {\r\n\r\n      return this.http.get<any>(this.prop.count.url + url, this.prop.count.args).pipe(\r\n        ...this.prop.count.operators,\r\n        catchError(() => EMPTY)\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  private createShareButton(buttonsName: string) {\r\n\r\n    const button = {...this.shareService.prop[buttonsName]};\r\n\r\n    if (button) {\r\n      // Set share button properties\r\n      this.prop = button;\r\n\r\n      // Remove previous button class\r\n      this.renderer.removeClass(this.el.nativeElement, `sb-${this._buttonClass}`);\r\n\r\n      // Add new button class\r\n      this.renderer.addClass(this.el.nativeElement, `sb-${button.type}`);\r\n\r\n      // Set button css color variable\r\n      this.el.nativeElement.style.setProperty('--button-color', this.prop.color);\r\n\r\n      // Keep a copy of the class for future replacement\r\n      this._buttonClass = button.type;\r\n\r\n      // Set aria-label attribute\r\n      this.renderer.setAttribute(this.el.nativeElement, 'aria-label', button.ariaLabel || button.text);\r\n    } else {\r\n      throw new Error(`[ShareButtons]: The share button '${buttonsName}' does not exist!`);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { shareCountFormatter } from './utils';\r\n\r\n@Pipe({\r\n  name: 'shareCount'\r\n})\r\nexport class ShareCountPipe implements PipeTransform {\r\n  transform(num: number, digits?: number) {\r\n    return shareCountFormatter(num, digits);\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { ShareButtons } from './share.service';\r\nimport { ShareButtonDirective } from './share-button.directive';\r\nimport { ShareCountPipe } from './share-count.pipe';\r\nimport { ShareButtonsConfig } from './share.models';\r\nimport { CONFIG } from './share.tokens';\r\n\r\nexport function ShareButtonsFactory(config: ShareButtonsConfig) {\r\n  return new ShareButtons(config);\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ShareButtonDirective,\r\n    ShareCountPipe\r\n  ],\r\n  exports: [\r\n    ShareButtonDirective,\r\n    ShareCountPipe\r\n  ]\r\n})\r\nexport class ShareModule {\r\n  static forRoot(config?: ShareButtonsConfig): ModuleWithProviders {\r\n    return {\r\n      ngModule: ShareModule,\r\n      providers: [\r\n        {provide: CONFIG, useValue: config},\r\n        {\r\n          provide: ShareButtons,\r\n          useFactory: ShareButtonsFactory,\r\n          deps: [CONFIG]\r\n        }\r\n      ]\r\n    };\r\n  }\r\n}\r\n"]}