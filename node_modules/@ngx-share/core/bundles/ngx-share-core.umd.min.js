!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@ngx-share/core",["exports","@angular/core","rxjs","rxjs/operators","@angular/common","@angular/common/http"],e):e((t["ngx-share"]=t["ngx-share"]||{},t["ngx-share"].core={}),t.ng.core,t.rxjs,t.rxjs.operators,t.ng.common,t.ng.common.http)}(this,function(t,s,i,a,p,e){"use strict";var n=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t};function c(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=i.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}var r=new s.InjectionToken("CONFIG");function l(t){return t&&"object"==typeof t&&!Array.isArray(t)}function h(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return t;var o,n,i=e.shift();if(l(t)&&l(i))for(var s in i)l(i[s])?(t[s]||Object.assign(t,((o={})[s]={},o)),h(t[s],i[s])):Object.assign(t,((n={})[s]=i[s],n));return h.apply(void 0,u([t],e))}function d(t){var e=document.querySelector('meta[property="'+t+'"]');return e?e.getAttribute("content"):undefined}var o=[a.map(function(t){var e=t.prop.share[t.os];if(e){var r=t.prop.share.metaTags,n=t.metaTags,o="";return r&&(o=Object.entries(r).map(function(t){var e=c(t,2),r=e[0],o=e[1];return n[r]?o+"="+encodeURIComponent(n[r]):""}).join("&")),e+o}})],m=[a.map(function(){return window.print()})],f=[a.map(function(t){return t.renderer.setStyle(t.el,"pointer-events","none"),t.temp={text:t.prop.text,icon:t.prop.icon},t.metaTags.url=decodeURIComponent(t.metaTags.url),t}),a.switchMap(function(t){return(e=t.metaTags.url,n=t.os,i.of(e).pipe(a.tap(function(t){var e=document.createElement("textarea");if(e.value=t,document.body.appendChild(e),"ios"===n){var r=document.createRange();r.selectNodeContents(e);var o=window.getSelection();o.removeAllRanges(),o.addRange(r),e.readOnly=!0,e.setSelectionRange(0,999999)}else e.select();document.execCommand("copy"),document.body.removeChild(e)}))).pipe(a.map(function(){return t.prop.text=t.prop.successText,t.prop.icon=t.prop.successIcon,t}),a.catchError(function(){return t.prop.text=t.prop.failText,t.prop.icon=t.prop.failIcon,i.of(t)}));var e,n}),a.map(function(t){return t.cd.markForCheck(),t}),a.delay(2e3),a.map(function(t){t.renderer.setStyle(t.el,"pointer-events","auto"),t.prop.text=t.temp.text,t.prop.icon=t.temp.icon,t.cd.markForCheck()})],g=[a.map(function(t){var e=t.metaTags.description,r=t.metaTags.url;return h(t,{metaTags:{description:e?e+"\r\n"+r:r}})})],b=[a.map(function(t){return+t.share.share_count})],y=[a.map(function(t){return JSON.parse(t.replace(/^receiveCount\((.*)\)/,"$1"))}),a.map(function(t){return+t.count})],w=[a.map(function(t){return+t.response.note_count})],v=[a.map(function(t){return+t.data.children[0].data.score})],x={facebook:{type:"facebook",text:"Facebook",icon:["fab","facebook-f"],color:"#4267B2",share:{desktop:"https://www.facebook.com/sharer/sharer.php?",android:"https://www.facebook.com/sharer/sharer.php?",ios:"https://www.facebook.com/sharer/sharer.php?",operators:o,metaTags:{url:"u"}},count:{request:"http",url:"https://graph.facebook.com?id=",operators:b}},twitter:{type:"twitter",text:"Twitter",icon:["fab","twitter"],color:"#00acee",share:{desktop:"https://twitter.com/intent/tweet?",android:"https://twitter.com/intent/tweet?",ios:"https://twitter.com/intent/tweet?",operators:o,metaTags:{url:"url",description:"text",tags:"hashtags",via:"via"}}},google:{type:"google",text:"Google+",icon:["fab","google-plus-g"],color:"#DB4437",share:{desktop:"https://plus.google.com/share?",android:"https://plus.google.com/share?",ios:"https://plus.google.com/share?",metaTags:{url:"url"},operators:o}},linkedin:{type:"linkedin",text:"LinkedIn",icon:["fab","linkedin-in"],color:"#006fa6",share:{desktop:"http://www.linkedin.com/shareArticle?",android:"http://www.linkedin.com/shareArticle?",ios:"http://www.linkedin.com/shareArticle?",operators:o,metaTags:{url:"url",title:"title",description:"summary"}}},pinterest:{type:"pinterest",text:"Pinterest",icon:["fab","pinterest-p"],color:"#BD091D",share:{desktop:"https://in.pinterest.com/pin/create/button/?",android:"https://in.pinterest.com/pin/create/button/?",ios:"https://in.pinterest.com/pin/create/button/?",operators:o,metaTags:{url:"url",description:"description",image:"media"}},count:{request:"http",url:"https://api.pinterest.com/v1/urls/count.json?url=",args:{responseType:"text"},operators:y}},reddit:{type:"reddit",text:"Reddit",icon:["fab","reddit-alien"],color:"#FF4006",share:{desktop:"http://www.reddit.com/submit?",android:"http://www.reddit.com/submit?",ios:"http://www.reddit.com/submit?",operators:o,metaTags:{url:"url",title:"title"}},count:{request:"http",url:"https://buttons.reddit.com/button_info.json?url=",operators:v}},tumblr:{type:"tumblr",text:"Tumblr",icon:["fab","tumblr"],color:"#36465D",share:{desktop:"http://tumblr.com/widgets/share/tool?",android:"http://tumblr.com/widgets/share/tool?",ios:"http://tumblr.com/widgets/share/tool?",operators:o,metaTags:{url:"canonicalUrl",description:"caption",tags:"tags"}},count:{request:"jsonp",url:"https://api.tumblr.com/v2/share/stats?url=",operators:w}},whatsapp:{type:"whatsapp",text:"WhatsApp",icon:["fab","whatsapp"],color:"#25D366",share:{desktop:"https://web.whatsapp.com/send?",android:"whatsapp://send?",ios:"whatsapp://send?",operators:u(g,o),metaTags:{description:"text"}}},messenger:{type:"messenger",text:"Messenger",icon:["fab","facebook-messenger"],color:"#0080FF",share:{android:"fb-messenger://share/?",ios:"fb-messenger://share/?",operators:o,metaTags:{url:"link"}}},telegram:{type:"telegram",text:"Telegram",icon:["fab","telegram-plane"],color:"#0088cc",share:{desktop:"https://t.me/share/url?",android:"https://t.me/share/url?",ios:"https://t.me/share/url?",operators:o,metaTags:{url:"url",description:"text"}}},vk:{type:"vk",text:"VKontakte",icon:["fab","vk"],color:"#4C75A3",share:{desktop:"http://vk.com/share.php?",android:"http://vk.com/share.php?",ios:"http://vk.com/share.php?",operators:o,metaTags:{url:"url"}}},stumble:{type:"stumble",text:"Stumble",icon:["fab","stumbleupon"],color:"#eb4924",share:{desktop:"http://www.stumbleupon.com/submit?",android:"http://www.stumbleupon.com/submit?",ios:"http://www.stumbleupon.com/submit?",operators:o,metaTags:{url:"url"}}},xing:{type:"xing",text:"Xing",icon:["fab","xing"],color:"#006567",share:{desktop:"https://www.xing.com/app/user?op=share&",android:"https://www.xing.com/app/user?op=share&",ios:"https://www.xing.com/app/user?op=share&",operators:o,metaTags:{url:"url"}}},sms:{type:"sms",text:"SMS",icon:"comment-alt",color:"#20c16c",share:{desktop:"sms:?",android:"sms:?",ios:"sms:?",metaTags:{description:"body"},operators:u(g,o)}},email:{type:"email",text:"Email",icon:"envelope",color:"#FF961C",share:{desktop:"mailto:?",android:"mailto:?",ios:"mailto:?",operators:u(g,o),metaTags:{title:"subject",description:"body"}}},copy:{type:"copy",text:"Copy link",successText:"Copied",successIcon:"check",failText:"Error",failIcon:"exclamation",icon:"link",color:"#607D8B",share:{operators:f}},print:{type:"print",text:"Print",icon:"print",color:"#765AA2",share:{operators:m}}},k=function(){function t(t){this.config={prop:x,options:{theme:"default",include:[],exclude:[],size:0,url:undefined,title:undefined,description:undefined,image:undefined,tags:undefined,twitterAccount:undefined,autoSetMeta:!0,gaTracking:!1,windowWidth:800,windowHeight:500,moreButtonIcon:"ellipsis-h",lessButtonIcon:"minus"}},this.config$=new i.BehaviorSubject(this.config),t&&this.setConfig(t)}return Object.defineProperty(t.prototype,"prop",{get:function(){return this.config.prop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"twitterAccount",{get:function(){return this.config.options.twitterAccount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.config.options.theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowSize",{get:function(){return"width="+this.config.options.windowWidth+", height="+this.config.options.windowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.config.options.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.config.options.title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.config.options.description},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this.config.options.image},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tags",{get:function(){return this.config.options.tags},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSetMeta",{get:function(){return this.config.options.autoSetMeta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gaTracking",{get:function(){return this.config.options.gaTracking},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.config.options.size},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t){this.config=h(this.config,t),this.config$.next(this.config)},t.prototype.addButton=function(t,e){var r,o={prop:n({},x,(r={},r[t]=e,r))};this.setConfig(o)},t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:s.Inject,args:[r]}]}]},t}(),S=function(){function t(t,e,r,o,n,i){this.shareService=t,this.http=e,this.renderer=r,this.cd=o,this.el=n,this.platform=i,this.getCount=!1,this.autoSetMeta=this.shareService.autoSetMeta,this.url=this.shareService.url,this.title=this.shareService.title,this.description=this.shareService.description,this.image=this.shareService.image,this.tags=this.shareService.tags,this.count=new s.EventEmitter,this.opened=new s.EventEmitter,this.closed=new s.EventEmitter}return t.prototype.onClick=function(){var t,e,r=this;if(p.isPlatformBrowser(this.platform)){var o=this.autoSetMeta?{url:this.url,title:this.title||d("og:title"),description:this.description||d("og:description"),image:this.image||d("og:image"),via:this.shareService.twitterAccount||d("twitter:site"),tags:this.tags}:{url:this.url,title:this.title,description:this.description,image:this.image,tags:this.tags,via:this.shareService.twitterAccount},n={cd:this.cd,renderer:this.renderer,prop:this.prop,el:this.el.nativeElement,os:(t=navigator.userAgent||navigator.vendor||window.opera,/android/i.test(t)?"android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"ios":"desktop"),metaTags:o};(e=i.of(n)).pipe.apply(e,u(this.prop.share.operators,[a.tap(function(t){return r.share(t)}),a.take(1)])).subscribe()}},t.prototype.ngOnChanges=function(t){var e=this;p.isPlatformBrowser(this.platform)&&(t.shareButton&&(t.shareButton.firstChange||t.shareButton.previousValue!==this.shareButton)&&this.createShareButton(this.shareButton),(!this.url||t.url&&t.url.previousValue!==this.url)&&i.of(null).pipe(a.map(function(){return e.url=function(t,e){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[ShareButtons]: Sharing link '"+t+"' is invalid!")}return e}(e.autoSetMeta?e.url||d("og:url"):e.url,window.location.href),e.url}),a.filter(function(){return e.prop.count&&e.getCount}),a.switchMap(function(t){return e.shareCount(t)}),a.tap(function(t){return e.count.emit(t)}),a.take(1)).subscribe())},t.prototype.share=function(t){var e=this;if(t){this.shareService.gaTracking&&"undefined"!=typeof ga&&ga("send","social",this.prop.type,"click",this.url),this.opened.emit(this.prop.type);var r=window.open(t,"newwindow",this.shareService.windowSize);if(r)var o=window.setInterval(function(){r.closed&&(window.clearInterval(o),e.closed.emit(e.prop.type))},200)}},t.prototype.shareCount=function(t){return"jsonp"===this.prop.count.request?(e=this.http.jsonp(this.prop.count.url+t,"callback")).pipe.apply(e,u(this.prop.count.operators,[a.catchError(function(){return i.EMPTY})])):(r=this.http.get(this.prop.count.url+t,this.prop.count.args)).pipe.apply(r,u(this.prop.count.operators,[a.catchError(function(){return i.EMPTY})]));var e,r},t.prototype.createShareButton=function(t){var e=n({},this.shareService.prop[t]);if(!e)throw new Error("[ShareButtons]: The share button '"+t+"' does not exist!");this.prop=e,this.renderer.removeClass(this.el.nativeElement,"sb-"+this._buttonClass),this.renderer.addClass(this.el.nativeElement,"sb-"+e.type),this.el.nativeElement.style.setProperty("--button-color",this.prop.color),this._buttonClass=e.type,this.renderer.setAttribute(this.el.nativeElement,"aria-label",e.ariaLabel||e.text)},t.decorators=[{type:s.Directive,args:[{selector:"[shareButton]"}]}],t.ctorParameters=function(){return[{type:k},{type:e.HttpClient},{type:s.Renderer2},{type:s.ChangeDetectorRef},{type:s.ElementRef},{type:Object,decorators:[{type:s.Inject,args:[s.PLATFORM_ID]}]}]},t.propDecorators={shareButton:[{type:s.Input}],getCount:[{type:s.Input}],autoSetMeta:[{type:s.Input}],url:[{type:s.Input}],title:[{type:s.Input}],description:[{type:s.Input}],image:[{type:s.Input}],tags:[{type:s.Input}],count:[{type:s.Output}],opened:[{type:s.Output}],closed:[{type:s.Output}],onClick:[{type:s.HostListener,args:["click"]}]},t}(),T=function(){function t(){}return t.prototype.transform=function(t,e){return function(t,e){for(var r=[{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}],o=/\.0+$|(\.[0-9]*[1-9])0+$/,n=0;n<r.length;n++)if(t>=r[n].value)return(t/r[n].value).toFixed(e).replace(o,"$1")+r[n].symbol;return t.toFixed(e).replace(o,"$1")}(t,e)},t.decorators=[{type:s.Pipe,args:[{name:"shareCount"}]}],t}();function j(t){return new k(t)}var C=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:r,useValue:t},{provide:k,useFactory:j,deps:[r]}]}},e.decorators=[{type:s.NgModule,args:[{declarations:[S,T],exports:[S,T]}]}],e}();t.ShareButtonsFactory=j,t.ShareModule=C,t.ShareButtons=k,t.ShareButtonDirective=S,t.metaTagsOperators=o,t.printOperators=m,t.copyOperators=f,t.urlInMessageOperators=g,t.FacebookCountOperators=b,t.PinterestCountOperators=y,t.TumblrCountOperators=w,t.RedditCountOperators=v,t.shareButtonsProp=x,t.ShareCountPipe=T,t.CONFIG=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-share-core.umd.min.js.map